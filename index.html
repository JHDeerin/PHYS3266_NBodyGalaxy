<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PHYS 3266 - N-Body Galaxy Simulation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" media="screen" href="css/styles.css" />

    <script type="module" src="js/simulation.js" defer></script>
    <script type="module" src="js/simulationClasses.js" defer></script>
    <script type="module" src="js/barnesHutTree.js" defer></script>
    <script type="module" src="js/drawing.js" defer></script>
    <script type ="module" src='js/AkPlot.js' defer></script>
    
</head>
<body>
    <main>
        <header>
            <h1>N-Body Galaxy Simulation</h1>
            <h2>Joseph Deerin and Nicholas Gravina</h2>
            <h3>PHYS 3266 (Spring 2019), Georgia Institute of Technology</h3>
        </header>

        <div class="sim-container">
            <div class="sim-canvas-container">
                <canvas id="sim-canvas"></canvas>
            </div>

            <!-- Simulation UI Controls -->
            <div class="sim-ui-controls">
                <div class="sim-control">
                    <button id='run'>Run/Pause</button>
                    <button id='restart'>Restart</button>
                </div>
                <label class="sim-control">
                    Number of Objects: <input type='number' id="numObj" value=100>
                </label>
                <label class="sim-control">
                    Theta: <input type='number' id="theta" value=0.5>
                </label>
                <label class="sim-control">
                    Skip: <input type='number' id="skip" value=1>
                </label>
                <label class="sim-control">
                    <!-- Defaults to dt = 100,000 years per step -->
                    dt (seconds): <input type='number' id="dt" value=3.1536e12>
                </label>

                <h3>Camera Controls</h3>

                <label class="sim-control">
                    Screen Width (light years): <input type='number' id="screenWidth" value=10>
                </label>
                <label class="sim-control">
                    Distance from Center (light years): <input type='number' id="cameraDist" value=15>
                </label>
                <label class="sim-control">
                    Follow Center of Mass? <input type="checkbox" id="follow">
                </label>

                <h3>Simulation Details</h3>

                <label class="sim-control">
                    Galaxy Radius (light years): <input type='number' id="maxDist" value=5>
                </label>
                <label class="sim-control">
                    Max Initial Speed (m/s): <input type='number' id="maxSpeed" value=23>
                </label>
                <label class="sim-control">
                    Max Star Mass (kg): <input type='number' id="maxMass" value=8.0e30>
                </label>
                <label class="sim-control">
                    Min Star Mass (kg): <input type='number' id="minMass" value=1.0e30>
                </label>
                <label class="sim-control">
                    Collision Distance (m): <input type='number' id="collisionDist" value=1.0e15>
                </label>
                <label class="sim-control">
                    Gravitational Constant: <input type='number' id="bigG" value=6.6738e-11>
                </label>
                <h3>Plotting Controls</h3>
                 <label class="sim-control">
                    Plot Period (Number of Time Steps): <input type='number' id="plotPeriod" value=10>
                </label>
            </div>
            <div class="sim-canvas-container">
                <canvas id="Energy-canvas"></canvas>
            </div>
            <div class="sim-canvas-container">
                <canvas id="AngMomentum-canvas"></canvas>
            </div>
        </div>


            <h2>Goals of the Project</h2>
            <ol>
                <li>Create an efficient n-body simulation using Barnes-Hut algorithm.</li>
                <li>Investigate galaxy formation kinetics using this siumulation.</li>
                <li>Investigate star formaiton within galaxies.</li>
            </ol>

            <h2>Execution</h2>

            <p>For our project, we constructed a model of galaxy formation by extending the model of the n-body problem in 3D. We modeled the process of accretion with momentum conservation and perfect bonding for a collision of two molecules.</p>

            <h3>Barnes-Hut Tree Algorithm</h3>

            <p>To allow for the simulation of more objects and improve computation efficiency, we employed a version of the Barnes-Hut Tree algorithm. The algorithm works by grouping masses togething into "trees" and moving them together as one by simply calculating the kinetics of their center of mass....</p>

            <h3>Star Formation</h3>

            <p>Another key aspect of galaxies is star formation. Since star formation is primarily controlled by mass, to indicate that an object had become massive enough to form a star, we changed its color to reflect the maximum of its emmission spectrum given by the black-body assumption. To obtain this, we assumed a density comprable to the solar density and a sperical geometry, then used Wien's law and the Stefan-Boltzmann law combined with the typical mass luminosity relation for main-sequence stars to obtain an expression for the maximum wavelength in terms of mass. Then we converted the nanometer wavelenth into an RGB color code that can be used by javascript to color the 'star.' For objects with a mass that produces a max wavelenth outside of the visible spectrum, we did not change the color, leaving those objects white.</p> 

            <p> Note, however, that this color we have assigned each star, the so-called spectral color, is different form the black body color. The other possible color we could assign these stars, the black body color, takes into account the distribution of the wavelenths emitted by a black body at this temperature and the human visual system to calculate the color that the star would appear to the human eye. For example, a star with a spectral color of green, like our sun, would appear white to the human eye (have a white blackbody color of white) since it emits a relatively large amount of light over all wavelenghts of the visual spectrum.</p>

            <h2>Analysis</h2>

            <p>Through this relatively simple simulation, we were able to observe conservation of momentum, which controls the galaxyâ€™s rotational direction, and broadly classify the galactic features based upon the accreted mass. With this approach, we were not able to model any chemical aspect of galaxy formation, since we dealt with only homogeneous mass. Additionally, some of the specific features of galaxies, such as orbital speeds toward the center and overall shape, are belived to be the result of dark matter and are, therefore, not observable in our simulation. The parameters we varied were the initial mass distribution (the number of particles, their relative mass, initial spacing between particles, etc.); initial velocity distribution; the collision distance, or the critical distance between the centers of two masses that will result in the collision and merging of both masses; and the theta value, which governs the threshold at which the Barnes-Hut algorithm will apply.</p>
    </main>
</body>
</html>